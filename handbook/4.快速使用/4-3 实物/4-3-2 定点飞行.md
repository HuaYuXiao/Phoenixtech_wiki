# 定点飞行

## 快速启动脚本

运行使用tmux快捷脚本直接自动填充好指令

```
~/uav_ws/src/uav_code/sh/cruise_sim.sh
```

## 执行启动指令

### 打开各种功能

```
roslaunch fly_demo utils.launch
```

包含px4、mid360、舵机控制板（若有）、定位

### 调整定点飞行参数

打开`~/uav_ws/src/uav_code/fly_demo/params/cruise_points.yaml`调整参数

**需要将改为`if_true: true`以保证安全，为true时无人机会自动切入offboard，为false时会等待遥控器拨下offboard拨杆**

```
# 仿真还是实物
if_true: true
# 是否修改最大速度
if_modify_vel_param: true
# z方向0.5m/s
max_vel_z: 0.5
# xy方向0.5m/s
max_vel_xy: 0.5
# 判断到点的阈值 即距离目标点0.3m/s就算到达了
threshold_distance: 0.3
# 目标点个数
navigation_number: 6

point1:
  x: 0.0
  y: 0.0
  z: 1.0

point2:
  x: 1.0
  y: 0.0
  z: 1.0

point3:
  x: 1.0
  y: 1.0
  z: 1.0

point4:
  x: 0.0
  y: 1.0
  z: 1.0

point5:
  x: 0.0
  y: 0.0
  z: 1.0

point6:
  x: 0.0
  y: 0.0
  z: 0.2
```

### 启动控制代码

需要先将遥控器的紧急停桨开关拨到上方

```
roslaunch fly_demo cruise.launch
```

无人机未按照预设的点位依次飞行后降落，若发生意料之外的情况，请立即拨动offboard开关，使无人机进入手动操作模式，使用遥控器将无人机降落